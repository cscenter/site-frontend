$card-group-margin: ($grid-gutter-width / 2);
$card-deck-margin: $card-group-margin;

$card-columns-count: 2;


// Card deck

.card-deck {
  display: flex;
  flex-wrap: wrap;
  margin-left: -$card-group-margin;
  margin-right: -$card-group-margin;
  float: left; //For old browsers

  &._six {
    .card {
      @include media-breakpoint-up(sm) {
        width: calc(50% - #{$grid-gutter-width});
      }

      @include media-breakpoint-up(md) {
        width: calc(33.3333% - #{$grid-gutter-width});
      }

      @include media-breakpoint-up(lg) {
        width: #{calc(25% - #{$grid-gutter-width})};
      }

      @include media-breakpoint-up(xl) {
        width: #{calc(16.6666% - #{$grid-gutter-width})};
      }
    }
  }

  &._four {
    .card {
      @include media-breakpoint-up(sm) {
        width: calc(50% - #{$grid-gutter-width});
      }

      @include media-breakpoint-up(md) {
        width: calc(33.3333% - #{$grid-gutter-width});
      }

      @include media-breakpoint-up(lg) {
        width: #{calc(25% - #{$grid-gutter-width})};
      }
    }
  }

  &._three {
    .card {
      @include media-breakpoint-up(sm) {
        width: calc(50% - #{$grid-gutter-width});
      }

      @include media-breakpoint-up(md) {
        width: calc(33.3333% - #{$grid-gutter-width});
      }
    }
  }

  &._two {
    .card {
      @include media-breakpoint-up(sm) {
        width: calc(50% - #{$grid-gutter-width});
      }
    }
  }

  .card {
    margin-left: $card-group-margin;
    margin-right: $card-group-margin;
    display: block;
    height: auto;
    width: calc(100% - #{$grid-gutter-width});
  }
}


//
// Columns
//

.card-columns {
  .card {
    margin-bottom: spacer("3x");
  }

  @include media-breakpoint-up(sm) {
    column-count: $card-columns-count;
    column-gap: spacer("4x");

    .card {
      display: inline-block; // Don't let them vertically span multiple columns
      width: 100%; // Don't let their width change
    }
  }
}